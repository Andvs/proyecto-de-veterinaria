{% extends "base.html" %}
{% load static %}

{% block title %}Registrar usuario{% endblock %}

{% block content %}
<div class="container" style="max-width:600px;">
  <h2 class="mt-4 mb-3 text-center">Registrar nuevo usuario</h2>
  <p class="text-muted text-center">
    Completa tus datos de acceso y tipo de usuario. En el siguiente paso te pediremos la
    información específica según el tipo seleccionado.
  </p>

  <form method="post" action="{% url 'registrar_paso1' %}" novalidate>
    {% csrf_token %}

    <!-- Errores generales del formulario -->
    {% if form.non_field_errors %}
      <div class="alert alert-danger">
        {{ form.non_field_errors|striptags }}
      </div>
    {% endif %}

    <!-- Usuario -->
    <div class="mt-3">
      <label for="{{ form.username.id_for_label }}" class="form-label">Usuario</label>
      {{ form.username }}
      {% if form.username.help_text %}
        <div class="form-text">{{ form.username.help_text|safe }}</div>
      {% endif %}
      {% if form.username.errors %}
        <div class="text-danger small">{{ form.username.errors|striptags }}</div>
      {% endif %}
    </div>

    <!-- Correo -->
    <div class="mt-3">
      <label for="{{ form.email.id_for_label }}" class="form-label">Correo electrónico</label>
      {{ form.email }}
      {% if form.email.errors %}
        <div class="text-danger small">{{ form.email.errors|striptags }}</div>
      {% endif %}
    </div>

    <!-- Contraseña -->
    <div class="mt-3">
      <label for="{{ form.password1.id_for_label }}" class="form-label">Contraseña</label>
      {{ form.password1 }}
      {% if form.password1.help_text %}
        <div class="form-text">{{ form.password1.help_text|safe }}</div>
      {% endif %}
      {% if form.password1.errors %}
        <div class="text-danger small">{{ form.password1.errors|striptags }}</div>
      {% endif %}
    </div>

    <!-- Confirmación de contraseña -->
    <div class="mt-3">
      <label for="{{ form.password2.id_for_label }}" class="form-label">Confirmar contraseña</label>
      {{ form.password2 }}
      {% if form.password2.errors %}
        <div class="text-danger small">{{ form.password2.errors|striptags }}</div>
      {% endif %}
    </div>

    <!-- Tipo de usuario -->
    <div class="mt-3">
      <label for="{{ form.tipo.id_for_label }}" class="form-label">Tipo de usuario</label>
      {{ form.tipo }}
      {% if form.tipo.errors %}
        <div class="text-danger small">{{ form.tipo.errors|striptags }}</div>
      {% endif %}
    </div>

    <!-- RUT / DNI -->
    <div class="mt-3">
      <label for="{{ form.rut.id_for_label }}" class="form-label">RUT / DNI</label>
      {{ form.rut }}
      {% if form.rut.errors %}
        <div class="text-danger small">{{ form.rut.errors|striptags }}</div>
      {% endif %}
    </div>

    <!-- Teléfono -->
    <div class="mt-3">
      <label for "{{ form.telefono.id_for_label }}" class="form-label">Teléfono</label>
      {{ form.telefono }}
      {% if form.telefono.errors %}
        <div class="text-danger small">{{ form.telefono.errors|striptags }}</div>
      {% endif %}
    </div>

    <!-- Botones -->
    <div class="mt-4 d-flex justify-content-between">
      <button type="submit" class="btn btn-success w-50 me-2">Continuar</button>
      <button type="submit" name="cancel" value="1" class="btn btn-outline-secondary w-50">Cancelar</button>
    </div>
  </form>
</div>
{% endblock %}
